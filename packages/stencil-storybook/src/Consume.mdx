import { Meta } from "@storybook/blocks";

<Meta title="Introduction/Consommer des composants dans un projet" />

<ap-heading size="h1" mb-64>Consommer des Web Components dans un projet</ap-heading>

<ap-heading size="h2" mb-16>Introduction</ap-heading>
<ap-paragraph mb-32>Les Web Components sont un ensemble de plusieurs technologies (html, css, js) qui permettent de créer des éléments personnalisés réutilisables, dont les fonctionnalités sont encapsulées en dehors du reste du code et qui peuvent être utilisées au sein d'applications web.</ap-paragraph>
<ap-paragraph>Ce kit de composants a été créé sous [stencil](https://stenciljs.com/), codé en typescript puis transpilé en vanilla JS, de ce fait il peut être installé dans n'importe quelle technologie (Angular, React, Vue, Wordpress, ...)</ap-paragraph>

<ap-heading size="h2" mt-64 mb-16>Installation</ap-heading>
<ap-heading size="h3" mb-16>CDN</ap-heading>
<ap-paragraph>Pas encore disponible.</ap-paragraph>

<ap-heading size="h3" mt-64 mb-16>Package NPM</ap-heading>
<ap-paragraph mb-32><strong>Important: </strong> Il est primordial d'avoir un fichier .nmprc à la racine de son projet contenant le code ci-dessous pour installer les packages. Les packages sont normalements stockés sur le registy public NPM, dans notre cas les packages sont stockés en interne dans notre azure</ap-paragraph>
```
registry=https://pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/registry/
always-auth=true

; begin auth token
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/registry/:username=agilepartner
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/registry/:_password=ZHVhcG9kcHZ2N3V1cHR2ZW81aTN3cnZ1dnV5c3FuZWlzM29udTZ5eTJlYXdxZ216bjQ3YQ==
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/registry/:email=lsciampagna@agilepartner.net
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/:username=agilepartner
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/:_password=ZHVhcG9kcHZ2N3V1cHR2ZW81aTN3cnZ1dnV5c3FuZWlzM29udTZ5eTJlYXdxZ216bjQ3YQ==
//pkgs.dev.azure.com/agilepartner/AP-DigitalFactory/_packaging/web-components/npm/:email=lsciampagna@agilepartner.net
; end auth token
```

<ap-paragraph mb-32>Les Web Components peuvent être installés dans votre projet en tant que dépendance de la même manière que n'importe quel autre package: `npm install ap-web-components`</ap-paragraph>

<ap-paragraph>Ce package sera suffisant pour exécuter des tâches simples mais des barrières vont rapidement apparaître comme par exemple : </ap-paragraph>
* <ap-paragraph>l'IDE est dans l'incapacité d'autocompléter ce que vous écrivez</ap-paragraph>
* <ap-paragraph>Dans le cas d'Angular les composants de type champs texte, checkbox, ... ne sont pas reconnus par Reactive Forms</ap-paragraph>

<ap-paragraph>Il est donc obligatoire d'installer un second package NPM propre au framework que vous allez utiliser.</ap-paragraph>

<ap-heading size="h4" mt-64 mb-16>Angular (⚠️ Pas encore compatible avec la version 17)</ap-heading>
<ap-paragraph>`npm install ap-angular-components`</ap-paragraph>
<ap-paragraph>Une fois la dépendance installée il reste à instancier les composants ainsi qu'appeler le CSS</ap-paragraph>

<ap-heading size="h5" mt-64 mb-16>Appeler le CSS (⚠️ Pas encore compatible avec la version 17)</ap-heading>
<ap-paragraph>Dans le dossier `src/styles.scss`, appeler le fichier</ap-paragraph>
```
@import '../node_modules/ap-web-components/dist/ap-web-components/ap-web-components.css';
```

<ap-heading size="h5" mt-64 mb-16>Instancier les Web Components (⚠️ Pas encore compatible avec la version 17)</ap-heading>
<ap-paragraph>Dans le dossier `src/app/app.module.ts`</ap-paragraph>
```
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

import { AppComponent } from './app.component';
import { ComponentLibraryModule } from 'ap-angular-components/projects/component-library/src/lib/component-library.module';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    ComponentLibraryModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```


<ap-heading size="h4" mt-64 mb-16>React/Next</ap-heading>
<ap-paragraph>`npm install ap-react-components`</ap-paragraph>
<ap-paragraph>Une fois la dépendance installée il reste à instancier les composants ainsi qu'appeler le CSS</ap-paragraph>

<ap-heading size="h5" mt-64 mb-16>Appeler le CSS</ap-heading>
<ap-paragraph>Dans le dossier `src/app/global.css`, appeler le fichier</ap-paragraph>
```
@import '../../node_modules/ap-web-components/dist/ap-web-components/ap-web-components.css';
```

<ap-heading size="h5" mt-64 mb-16>Instancier les Web Components</ap-heading>
<ap-paragraph>Dans le dossier `src/app/page.tsx`</ap-paragraph>
```
"use client"

import { defineCustomElements, ApBadge, ApButton } from 'ap-react-components';

defineCustomElements();

export default function Home() {
  return (
    <main>
      <ApBadge content="test" size="sm" outlined />
      <ApButton content="button" />
    </main>
  )
}

```
